{% extends 'pos/base.html' %}

{% block title %}Dashboard - POS Zapater√≠a{% endblock %}

{% block content %}
<div class="page-header">
    <h2>Dashboard</h2>
    <span>{{ request.user.username }}</span>
</div>

<div class="stats-grid">
    <div class="stat-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
        <h3>Productos Activos</h3>
        <div class="value">{{ total_productos }}</div>
    </div>
    
    <div class="stat-card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
        <h3>Bajo Stock</h3>
        <div class="value">{{ productos_bajo_stock }}</div>
    </div>
    
    <div class="stat-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
        <h3>Ventas Hoy</h3>
        <div class="value">${{ total_ventas_hoy|floatformat:2 }}</div>
    </div>
    
    <div class="stat-card" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
        <h3>Ventas del Mes</h3>
        <div class="value">${{ total_ventas_mes|floatformat:2 }}</div>
    </div>
</div>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-top: 2rem;">
    <div>
        <h3 style="margin-bottom: 1rem; color: #667eea;">üèÜ Top Productos (30 d√≠as)</h3>
        <table>
            <thead>
                <tr>
                    <th>Producto</th>
                    <th>Marca</th>
                    <th>Vendidos</th>
                </tr>
            </thead>
            <tbody>
                {% for item in productos_vendidos %}
                <tr>
                    <td>{{ item.producto__nombre }}</td>
                    <td>{{ item.producto__marca }}</td>
                    <td><span class="badge badge-success">{{ item.total_vendido }}</span></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    
    <div>
        <h3 style="margin-bottom: 1rem; color: #667eea;">üë• Clientes Recientes</h3>
        <table>
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Tel√©fono</th>
                    <th>Registro</th>
                </tr>
            </thead>
            <tbody>
                {% for cliente in clientes_recientes %}
                <tr>
                    <td>{{ cliente.nombre }}</td>
                    <td>{{ cliente.telefono }}</td>
                    <td>{{ cliente.fecha_registro|date:"d/m/Y" }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}